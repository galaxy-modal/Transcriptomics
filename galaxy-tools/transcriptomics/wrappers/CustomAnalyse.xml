<tool id="customAnalyse" name="CustomAnalyse" version="0.1.0">
	<description>Custom Analyse</description>
	<requirements>
	  <container type="docker">sblanck/testtool:latest</container>
	</requirements>
	<command>

		/galaxy-tools/stderr_wrapper.py Rscript 
		/galaxy-tools/transcriptomics/CustomAnalyse/CustomAnalyse.R
		   	"${input}"
			"${target}"
			"${condition1}"
			"${selectCondition1}"
		    "${condition2}"
			"${selectCondition2}"
			$result_export_eset
       		$result_export_conditions
			$result_html 
			$result_html.files_path
		/galaxy-tools/transcriptomics/CustomAnalyse/CustomAnalyse_tpl.html
	</command>
	
	<inputs>
	
		<param name="input" type="data" format="rdata" label="rdata containing previously normalized data"/>

		<param name="target" type="data" format="txt" label="target file" help="target file associated with the .CEL file dataset"/>
		
		<!--param name="normalisation" type="select" label="Preprocessing/normalization">
		<options>
    		<option value="rma">rma</option>
            <option value="quantile">quantile normalization</option>
            <option value="log2">log2</option>
            <option value="none">none</option>
		</options>	
		</param-->
		
		<param name="condition1" type="text" value="Condition1" label="Condition 1 name"/>		
		<param name="selectCondition1" type="select" display="checkboxes" label="Condition 1" multiple="true">
			<options from_dataset="target">
    		<column name="name" index="1"/>
    		<column name="value" index="0"/>
		</options>
		</param>	
		
		<param name="condition2" type="text" value="Condition2" label="Condition 2 name"/>
		<param name="selectCondition2" type="select" display="checkboxes" label="Condition 2" multiple="true">
			<options from_dataset="target">
    		<column name="name" index="1"/>
    		<column name="value" index="0"/>
		</options>
		</param>	
	
	</inputs>
	<outputs>
		<data format="html" name="result_html" label="Annotations"/>
		<data format="rdata" name="result_export_eset" label="export expressionSet of ${input.name}"/>		
		<data format="cond" name="result_export_conditions" label="export conditions of ${input.name}"/>
	</outputs>

	<help>
	</help>

</tool>
