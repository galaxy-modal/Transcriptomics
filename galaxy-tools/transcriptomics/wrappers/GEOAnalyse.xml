<tool id="metaMAGEOQuery" name="GEOanalyse" version="0.1.0">
	<description>GEOAnalyse wrapper</description>
	<requirements>
	  <container type="docker">sblanck/testtool:latest</container>
	</requirements>
	<command>

		/galaxy-tools/stderr_wrapper.py Rscript 
		/galaxy-tools/transcriptomics/GEOanalyse/GEOAnalyse.R
		   	"${rdataset}"
		 	"${selectCondition1}"
		    "${selectCondition2}"
			"${nbresult}"
			"${transformation}"
       		$result_html 
			$result_html.files_path
			$export_rdata
		/galaxy-tools/transcriptomics/GEOanalyse/GEOAnalyse_tpl.html
		
	</command>
	
	<inputs>
	
		<param name="rdataset" type="data" format="rdata" label="RData" help="RData to be used"/>

		<param name="conditions" type="data" format="cond" label="Conditions" help="conditions associated with the rData file"/>
				
		<param name="transformation" type="select" label="log2 transformation">
			<option value="auto">auto</option>
            <option value="yes">yes</option>
            <option value="no">no</option>
        </param>
			
		<param name="selectCondition1" type="select" label="condition 1">
			<options from_dataset="conditions">
    		<column name="name" index="0"/>
    		<column name="value" index="0"/>
		</options>
		</param>	
		<param name="selectCondition2" type="select" label="condition 2">
			<options from_dataset="conditions">
    		<column name="name" index="0"/>
    		<column name="value" index="0"/>
		</options>
		</param>	
		<param name="nbresult" type="integer" value="1000" min="1" label="number of top genes" help="Number of genes to be displayed in result datatable"/>
	
	</inputs>
	<outputs>
		<data format="html" name="result_html" label="Results of analysis of ${rdataset.name}"/>
		<data format="rdata" name="export_rdata" label="Export of expression set of ${rdataset.name}"/>
	</outputs>

	<help>
	</help>

</tool>
